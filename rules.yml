version: "3.1"

rules:

# BASIC RULES
- rule: Say goodbye anytime the user says goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
    - intent: bot_challenge
    - action: utter_iamabot

- rule: greet
  steps:
    - intent: greet
    - action: utter_greet

- rule: say welcome when thanked
  steps:
    - intent: thanks
    - action: utter_welcome

# SUICIDE RULE (explicit)
- rule: suicidal thoughts
  steps:
    - intent: suicidal_thoughts
    - action: utter_suicide_is_not_ok
    - action: utter_reach_out
    - action: utter_talk_to_help
    - action: utter_it_is_a_helpline
    - action: utter_suicidal_help

# REMINDER RULE
- rule: set reminder
  steps:
    - intent: add_event
    - action: action_add_event

# VIDEO ACTION RULES (SAFE)
- rule: Play breathing exercise video
  steps:
    - intent: watch_breathing_exercise
    - action: action_breathing_video
    - action: utter_are_you_done

- rule: Play grounding exercise video
  steps:
    - intent: watch_grounding_exercise
    - action: action_grounding_video
    - action: utter_are_you_feeling_better

- rule: Play Spotify anxiety playlist
  steps:
    - intent: request_spotify
    - action: action_play_spotify_anxiety
    - action: utter_are_you_feeling_better

# Personality test is now manual only (no forced activation)
- rule: Start personality test
  steps:
    - intent: start_personality_test
    - action: user_profile_info_form
    - active_loop: user_profile_info_form
- rule: Submit personality form
  condition:
    - active_loop: user_profile_info_form
  steps:
    - action: user_profile_info_form
    - active_loop: null
    - action: action_classify_user
